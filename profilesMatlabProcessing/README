

==========to download this package and test run it as follows========

1) Download and setup m_map and gcmfaces toolbox

2) Get MITprof toolbox
setenv CVSROOT ':pserver:cvsanon@mitgcm.org:/u/gcmpack'
cvs login 
      ( enter the CVS password: "cvsanon" )
cvs co  -d (profilesMatlabProcessing) MITgcm_contrib/gael/profilesMatlabProcessing

3) Download climatological fields, and put them in the directory (profilesMatlabProcessing)/climatology
or set directory names in profiles_prep_load_fields.m in (profilesMatlabProcessing)/profiles_process_main_v2
to indicate where climatological fields must be found.

4) Initialize and test the configuration
cd profilesMatlabProcessing
matlab -nojvm 
	( type profiles_process_init)

=======then you can process your own data as follow (see <= signs)===

profiles_prep_select.m 
	- Encapsulate the data set information in the 'dataset' structure
	- Directories, included variables, etc. are specified here.
=> You append specs for your data set here. Included examples: argo and wod05.

profiles_prep_load_fields.m
	- Load T-S atlases and variance atlas that will be used to detect
	  outliers and to attribute least-squares weights (for ECCO purpose)
=> You need to get gcmfaces package and binary files for this part.

profiles_read_wod05.m/profiles_read_argo.m
	- Encapsulate the that loads the data set in memory.
	- The data set file format specifics are handled here.
	- The calling sequence must be [varargout]=profile_read_wod05(dataset,nf,m);
	where 'dataset' is the aformentioned structure, nf is the current file 
	index (relative to dataset.fileInList). If m is set to 0, then varargout 
	must be the number of profiles/stations. If m is a profile index, then varargout 
	must be the profileCur structure that contains the current profile/station.
=> You need to make one of those routines for your data set. The two 
profiles_read_wod05.m/profiles_read_argo.m provide you the blueprint.

profiles_prep_convert.m
	- does conversions of pressure->depth, and insituT->potT, if needed.
        - profiles_prep_select.m specifies needed conversions in 'dataset'.
	- also switch [0 360] lon -> [-180 +180] lon, if needed.
profiles_prep_locate.m
	- get the grid point index of the profiles (on the atlases grid).
<= I need to upload gcmfaces_bindata

profiles_prep_interp.m
	- interpolate to standard depth levels, as spec. in profiles_prep_select.m.

profiles_prep_weights.m
	- compute instrumental + representation error profile.
	- instrumental error estimates (when available) are 
	specified at read time (see profiles_read_argo.m).

profiles_prep_tests.m
	- quality control/outlier detection.

profiles_prep_write_nc.m
	store/write results to temporary .mat files, then final .nc file.



